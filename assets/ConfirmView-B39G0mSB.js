import{d as $,$ as f,c as y,a1 as H,g as a,w as o,a2 as w,o as m,u as J,a3 as K,a as n,I as X,a4 as j,a5 as q,a6 as G,J as B,R as Q,S as C,t as b,X as Y,a7 as Z,b as _,E as u,_ as N,M as h,h as S,a0 as M,e as ee,r as te,H as V,i as T}from"./index-BmHhwhui.js";import{c as z,_ as ae,u as ne}from"./index-BQnlVemG.js";import{d as oe}from"./formatters-DZZy5CRR.js";import{h as se}from"./credit-note-Dh6deeBR.js";var P=(e=>(e.success="success",e.info="info",e.warning="warning",e.error="error",e))(P||{});const le=$({__name:"SnackbarToast",props:{type:{default:"success"},timeout:{default:3500}},setup(e){const r=f(()=>P[e.type]);return(p,d)=>(m(),y(H,{timeout:p.timeout,color:a(r),variant:"tonal"},{default:o(()=>[w(p.$slots,"default")]),_:3},8,["timeout","color"]))}}),ie={class:"mx-auto"};var A=(e=>(e.success="animate__animated animate__bounceIn animate__fast",e.info="animate__animated animate__zoomIn",e.warning="animate__animated animate__tada",e.error="animate__animated  animate__tada",e))(A||{}),E=(e=>(e.success="success",e.info="indigo-lighten-2",e.warning="orange-lighten-2",e.error="red-lighten-2",e))(E||{});const re=$({__name:"AlertDialog",props:{icon:{default:""},type:{default:"success"},size:{default:"sm"}},setup(e){const{thresholds:r}=J(),p=f(()=>r.value[e.size]),d=f(()=>A[e.type]),g=f(()=>E[e.type]);return(s,D)=>(m(),y(K,{maxWidth:a(p),opacity:"0.15",class:"mx-auto"},{default:o(({isActive:c})=>[n(X,{class:"text-center"},{append:o(()=>[n(u,{icon:"$close",variant:"text",color:"grey-lighten-1",onClick:k=>c.value=!1},null,8,["onClick"])]),default:o(()=>[n(q,{class:"mt-n7"},{default:o(()=>[n(G,{appear:"","enter-active-class":a(d)},{default:o(()=>[n(B,{color:a(g),icon:s.icon,size:"70",class:"mb-2"},null,8,["color","icon"])]),_:1},8,["enter-active-class"]),n(Q,{class:"my-2 font-weight-bold"},{default:o(()=>[C(b(s.$attrs.title),1)]),_:1}),n(Y,{class:"text-body-1"},{default:o(()=>[w(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3}),s.$slots.action?(m(),y(Z,{key:0,class:"pa-4"},{default:o(()=>[_("div",ie,[w(s.$slots,"action",{},void 0,!0),n(u,{class:"mx-2",text:"取消",variant:"outlined",color:"grey-600",onClick:k=>c.value=!1},null,8,["onClick"])])]),_:2},1024)):j("",!0)]),_:2},1024)]),_:3},8,["maxWidth"]))}}),de=N(re,[["__scopeId","data-v-d86ecd58"]]),ce={class:"d-flex align-center ga-3"},ue={key:0},me={class:"bg-grey-lighten-4 pa-2 rounded-lg"},pe={key:1},_e={class:"d-flex align-center ga-2"},fe=$({__name:"ConfirmView",setup(e){const[r,p]=h(!1),[d,g]=h(!1),[s,D]=h(!1),[c,k]=h(!1),v=S([]),i=S([]),F=f(()=>z.length<10||d.value);async function I(x){await g(!0),console.log(i.value);const t=ne(window,"afterprint",()=>{g(!1),t()});window.print()}function U(){if(!i.value.length){k(!0);return}D(!0)}return M(()=>v.value,x=>{x.forEach(t=>console.log(oe(t)))}),(x,t)=>{const R=te("v-date-input"),W=ae,L=de,O=le;return m(),y(ee,{class:"py-8 py-md-6"},{default:o(()=>[n(W,{title:"折讓單確認",selected:a(i),"onUpdate:selected":t[1]||(t[1]=l=>V(i)?i.value=l:null),items:a(z),headers:a(se),filterKeys:["name","invoice_number"],isPrint:a(d),hideFooter:a(F),"show-select":!0,loading:a(r)},{header:o(()=>[n(R,{modelValue:a(v),"onUpdate:modelValue":t[0]||(t[0]=l=>V(v)?v.value=l:null),label:"日期範圍",multiple:"range","prepend-inner-icon":"mdi-calendar-range","prepend-icon":"",rounded:"lg"},null,8,["modelValue"])]),actions:o(()=>[_("div",ce,[n(u,{text:"確認折讓","prepend-icon":"mdi-check",rounded:"lg",variant:"flat",loading:a(r),onClick:U},null,8,["loading"]),n(u,{text:"列印","prepend-icon":"mdi-printer-outline",rounded:"lg",variant:"outlined",color:"indigo-darken-2",loading:a(d),onClick:I},null,8,["loading"])])]),"item.actions":o(({item:l})=>[n(u,{icon:"mdi-printer-outline",onClick:ge=>I(l.id),variant:"text",color:"indigo-lighten-2"},null,8,["onClick"])]),_:1},8,["selected","items","headers","isPrint","hideFooter","loading"]),n(L,{modelValue:a(s),"onUpdate:modelValue":t[2]||(t[2]=l=>V(s)?s.value=l:null),icon:"mdi-help-circle",transition:"scale-transition",persistent:"",type:"warning",size:"xs"},{action:o(()=>[n(u,{text:"確認",variant:"flat",color:"deep-purple-lighten-1"})]),default:o(()=>[a(i).length===1?(m(),T("div",ue,[t[4]||(t[4]=C(" 確定要折讓 ")),_("span",me,b(a(i)[0].invoice_number),1),t[5]||(t[5]=C(" 嗎? "))])):(m(),T("div",pe,"確定要折讓選取的 "+b(a(i).length)+" 筆資料嗎?",1))]),_:1},8,["modelValue"]),n(O,{modelValue:a(c),"onUpdate:modelValue":t[3]||(t[3]=l=>V(c)?c.value=l:null),type:"error",rounded:"lg"},{default:o(()=>[_("div",_e,[n(B,{icon:"mdi-alert"}),t[6]||(t[6]=_("span",{class:"text-body-1"},"請選擇至少一筆資料",-1))])]),_:1},8,["modelValue"])]),_:1})}}}),ke=N(fe,[["__scopeId","data-v-c011c9f6"]]);export{ke as default};
